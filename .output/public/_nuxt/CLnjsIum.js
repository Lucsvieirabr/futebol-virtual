import ne from"./LwdJy28c.js";import re from"./F00KRvdw.js";import ie from"./D1OGBwm2.js";import{r as H,e as U,n as ue,f as ce,c as de,b as o,a as n,w as A,u as t,i as p,F as me,g as pe,o as fe,h as D,v as _e,j as w,t as h,s as ve}from"./Bo0c-sWM.js";import{s as Q,c as he,a as be,b as S,p as W,d as ge,u as xe,e as b,_ as Ce,f as we}from"./BXEL9EmM.js";import Se from"./CibQJoxf.js";import Ve from"./DyJAGWJ6.js";import ke from"./7UyqM2pw.js";import{f as X,u as Pe,a as Ie,S as K}from"./BudnUJeG.js";import"./Cfiee2jg.js";import"./BHDlSBGr.js";import"./s4lQBQYL.js";import"./BeD20kmL.js";import"./hbWRfQYR.js";import"./DWJ2CevQ.js";import"./CcGyknFq.js";import"./CY6ZV7BS.js";import"./DViPKDuM.js";const V={FISICA:{nome:"Pessoa Física",id:"PF"},JURIDICA:{nome:"Pessoa Jurídica",id:"PJ"}},Ee=Object.values(V).map(({nome:e,id:s})=>({nome:e,id:s}));Q(W);const f=he({passo_atual:be().required(),tipo_pessoa:S().when("passo_atual",{is:0,then:e=>e.required().oneOf(Object.values(V).map(s=>s.id),"Selecione um tipo de pessoa válido")}),cpf_cnpj:S().when("passo_atual",{is:0,then:e=>e.required().test("cpf_cnpj","Valor inválido",(s,l)=>Ue(s,l))}),nome:S().when("passo_atual",{is:0,then:e=>e.required("Nome/Razão Social é obrigatório")}),numero_conselho:S().when("passo_atual",{is:0,then:e=>e.required("Número do Conselho é obrigatório")}),email:S().when("passo_atual",{is:1,then:e=>e.required().test("email","Valor inválido",s=>ye(s))}),telefone:S().when("passo_atual",{is:1,then:e=>e.required("Telefone é obrigatório")}),password:S().when("passo_atual",{is:2,then:e=>e.required().min(8).matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[!@#$%^&*()_+{}|:<>?/~`"'\-=\\[\];,./]).*$/,"A senha deve conter pelo menos uma letra maiúscula, uma letra minúscula, um número e um caractere especial")})});function Ae(){ge({validateOnModelUpdate:!1,bails:!1});const{handleSubmit:e}=xe({validationSchema:f}),{value:s,errorMessage:l}=b("tipo_pessoa",f),{value:r,errorMessage:u}=b("passo_atual",f,{validateOnValueUpdate:!1}),{value:c,errorMessage:g}=b("cpf_cnpj",f),{value:d,errorMessage:y}=b("nome",f),{value:j,errorMessage:m}=b("numero_conselho",f),{value:_,errorMessage:k}=b("email",f,{validateOnValueUpdate:!1}),{value:P,errorMessage:I}=b("password",f),{value:E,errorMessage:x}=b("telefone",f);return{passo_atual:r,tipo_pessoa:s,cpf_cnpj:c,nome:d,numero_conselho:j,email:_,password:P,telefone:E,tipoPessoaError:l,passoAtualError:u,cpfCnpjError:g,nomeRazaoSocialError:y,numeroConselhoError:m,emailError:k,passwordError:I,telefoneError:x,handleSubmit:e}}function je(e){e=X(e);let s=0,l,r;if(!e||e=="00000000000")return!1;for(r=1;r<=9;r++)s=s+parseInt(e.substring(r-1,r))*(11-r);if(l=s*10%11,(l==10||l==11)&&(l=0),l!=parseInt(e.substring(9,10)))return!1;for(s=0,r=1;r<=10;r++)s=s+parseInt(e.substring(r-1,r))*(12-r);return l=s*10%11,(l==10||l==11)&&(l=0),l==parseInt(e.substring(10,11))}function Fe(e){if(!e)return!1;e=X(e);let s=e.length-2,l=e.substring(0,s),r=e.substring(s),u=0,c=s-7;if(e=="00000000000000")return!1;for(let d=s;d>=1;d--)u+=l.charAt(s-d)*c--,c<2&&(c=9);let g=u%11<2?0:11-u%11;if(g!=r.charAt(0))return!1;s=s+1,l=e.substring(0,s),u=0,c=s-7;for(let d=s;d>=1;d--)u+=l.charAt(s-d)*c--,c<2&&(c=9);return g=u%11<2?0:11-u%11,g==r.charAt(1)}function Ue(e,s){switch(s.parent.tipo_pessoa){case V.FISICA.id:return je(e);case V.JURIDICA.id:return Fe(e)}}function ye(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}const Me={class:"bg-white p-8 pb-4 drop-shadow-md rounded-lg w-full lg:w-1/3 sm:mx-auto"},$e=o("img",{src:Ce,alt:"Logotipo",class:"mt-4 mb-1 h-20 mx-auto"},null,-1),Te=o("div",{class:"text-center mb-7"},[o("div",{class:"text-900 text-xl font-medium my-2"}," Preencha seus dados ")],-1),De={class:"flex gap-4 mb-3"},Ne=o("label",{for:"tipo_pessoa",class:"block text-900 font-medium mb-2"},"Tipo",-1),Oe={class:"p-error text-sm"},Re={class:"w-full"},qe={for:"cpf_cnpj",class:"block text-900 font-medium mb-2"},ze={class:"p-error text-sm"},Je={class:"mb-3"},Le=o("label",{for:"nome",class:"block text-900 font-medium mb-2"},"Nome/Razão Social",-1),Be={class:"p-error text-sm"},Ge={class:"mb-3"},Ze=o("label",{for:"conselho",class:"block text-900 font-medium mb-2"},"Número do Conselho",-1),He={class:"p-error text-sm"},Ke={class:"flex pt-4 justify-between"},Qe=o("div",{class:"text-center mb-7"},[o("div",{class:"text-900 text-xl font-medium my-2"}," Insira seu email e telefone ")],-1),We={class:"mb-3"},Xe=o("label",{for:"email",class:"block text-900 font-medium mb-2"},"Email",-1),Ye={class:"p-error text-sm"},eo={class:"mb-3"},oo=o("label",{for:"telefone",class:"block text-900 font-medium mb-2"},"Telefone",-1),so={class:"p-error text-sm"},to={class:"flex pt-4 justify-between"},ao=o("div",{class:"text-center mb-7"},[o("div",{class:"text-900 text-xl font-medium my-2"}," Escolha uma senha segura ")],-1),lo={class:"mb-3"},no={class:"p-inputgroup flex-1 border-solid border border-gray-300 rounded-lg"},ro={class:"p-error text-sm"},io={class:"flex pt-4 justify-between"},Ao={__name:"cadastrar",setup(e){Q(W);const s=Pe(),l=Ie(),r=H(!1),u=H(!1),c=U(()=>_.value===V.FISICA.id);U(()=>_.value===V.JURIDICA.id);const g=U(()=>c.value?"CPF":"CNPJ"),d=U(()=>c.value?"999.999.999-99":"99.999.999/9999-99"),y=()=>{navigator.clipboard.writeText(x.value),l.show("Senha copiada","Salve em um local seguro"),u.value=!0},j=()=>{x.value=s.gerarSenha(),u.value=!1},{passo_atual:m,tipo_pessoa:_,cpf_cnpj:k,nome:P,numero_conselho:I,email:E,password:x,telefone:M,passoAtualError:uo,tipoPessoaError:N,cpfCnpjError:O,nomeError:R,numeroConselhoError:q,emailError:z,passwordError:J,telefoneError:L,handleSubmit:$}=Ae(),Y=$(()=>{m.value++}),ee=$(()=>{m.value++,j()}),oe=$(B=>{if(!u.value){l.show("Antes de continuar","Copie a senha gerada e guarde em um local seguro.",K.Error);return}r.value=!0,s.cadastrarNovoUsuario(B).then(a=>{l.show(a.title,a.message,K.Success),setTimeout(()=>{ue("/login")},1e3)}).catch(()=>{r.value=!1})});return ce(()=>{m.value=0,_.value=V.FISICA.id}),(B,a)=>{const se=ne,G=re,F=ie,v=ve,te=we,T=Se,ae=Ve,le=ke,Z=pe("tooltip");return fe(),de(me,null,[o("div",Me,[$e,n(ae,{activeStep:t(m),"onUpdate:activeStep":a[10]||(a[10]=i=>p(m)?m.value=i:null),linear:"",vertical:""},{default:A(()=>[D(o("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>p(m)?m.value=i:null),type:"hidden",name:"passo_atual"},null,512),[[_e,t(m)]]),n(T,{header:"Informações Pessoais"},{content:A(()=>[Te,o("div",null,[o("div",De,[o("div",null,[Ne,n(se,{modelValue:t(_),"onUpdate:modelValue":a[1]||(a[1]=i=>p(_)?_.value=i:null),options:t(Ee),"option-label":"nome","option-value":"id",placeholder:"Selecione uma opção",class:w(["w-full",{"p-invalid":t(N)}])},null,8,["modelValue","options","class"]),o("span",Oe,h(t(N)),1)]),o("div",Re,[o("label",qe,h(t(g)),1),n(G,{id:"cpf_cnpj",modelValue:t(k),"onUpdate:modelValue":a[2]||(a[2]=i=>p(k)?k.value=i:null),mask:t(d),name:"cpf_cnpj",type:"text",class:w([{"p-invalid":t(O)},"w-full"])},null,8,["modelValue","mask","class"]),o("span",ze,h(t(O)),1)])]),o("div",Je,[Le,n(F,{id:"nome",modelValue:t(P),"onUpdate:modelValue":a[3]||(a[3]=i=>p(P)?P.value=i:null),placeholder:"Digite seu nome ou razão social",class:w(["w-full",{"p-invalid":t(R)}])},null,8,["modelValue","class"]),o("span",Be,h(t(R)),1)]),o("div",Ge,[Ze,n(F,{id:"conselho",modelValue:t(I),"onUpdate:modelValue":a[4]||(a[4]=i=>p(I)?I.value=i:null),placeholder:"Digite o número do conselho",class:w(["w-full",{"p-invalid":t(q)}])},null,8,["modelValue","class"]),o("span",He,h(t(q)),1)])]),o("div",Ke,[n(te,{to:"/login"},{default:A(()=>[n(v,{label:"Fazer Login",link:""})]),_:1}),n(v,{label:"Próximo",onClick:t(Y)},null,8,["onClick"])])]),_:1}),n(T,{header:"Contato e Acesso"},{content:A(({prevCallback:i})=>[Qe,o("div",null,[o("div",We,[Xe,n(F,{id:"email",modelValue:t(E),"onUpdate:modelValue":a[5]||(a[5]=C=>p(E)?E.value=C:null),placeholder:"Digite seu email",class:w(["w-full",{"p-invalid":t(z)}])},null,8,["modelValue","class"]),o("span",Ye,h(t(z)),1)]),o("div",eo,[oo,n(G,{id:"telefone",modelValue:t(M),"onUpdate:modelValue":a[6]||(a[6]=C=>p(M)?M.value=C:null),mask:"?(99) 99999-9999",placeholder:"Digite seu telefone",class:w(["w-full",{"p-invalid":t(L)}])},null,8,["modelValue","class"]),o("span",so,h(t(L)),1)])]),o("div",to,[n(v,{label:"Voltar",link:"",onClick:i},null,8,["onClick"]),n(v,{label:"Próximo",onClick:t(ee)},null,8,["onClick"])])]),_:1}),n(T,{header:"Defina sua Senha"},{content:A(({prevCallback:i})=>[ao,o("div",lo,[o("div",no,[n(F,{modelValue:t(x),"onUpdate:modelValue":a[7]||(a[7]=C=>p(x)?x.value=C:null),class:w(["border-none",{"p-invalid":t(J)}])},null,8,["modelValue","class"]),D(n(v,{icon:"pi pi-sync",text:"",outlined:"",onClick:a[8]||(a[8]=C=>j())},null,512),[[Z,"Gerar senha",void 0,{top:!0}]]),D(n(v,{icon:"pi pi-copy",severity:"secondary",onClick:a[9]||(a[9]=C=>y())},null,512),[[Z,"Copiar senha",void 0,{top:!0}]])]),o("span",ro,h(t(J)),1)]),o("div",io,[n(v,{label:"Voltar",link:"",onClick:i},null,8,["onClick"]),n(v,{label:"Cadastrar",onClick:t(oe)},null,8,["onClick"])])]),_:1})]),_:1},8,["activeStep"])]),n(le)],64)}}};export{Ao as default};
