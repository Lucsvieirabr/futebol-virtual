import je from"./CZp9Zimn.js";import We from"./LwdJy28c.js";import{r as E,c as y,b as m,a as A,F as se,k as re,l as Je,w as ce,h as ie,m as de,s as Ke,o as _,t as G,d as ue,C as Qe}from"./Bo0c-sWM.js";import"./Cfiee2jg.js";import"./BHDlSBGr.js";import"./s4lQBQYL.js";import"./BeD20kmL.js";import"./hbWRfQYR.js";import"./DWJ2CevQ.js";import"./CcGyknFq.js";const Xe={class:"w-auto h-auto"},Ye={class:"max-w-2xl mx-auto mb-5"},Ze=m("h1",{class:"text-2xl font-bold text-center mb-4 text-blue-500"}," Ferramenta BBTips ",-1),et={class:"mb-4"},tt=m("span",{class:"block text-gray-700 font-medium mb-2"},"Dados para Análise",-1),nt={class:"flex gap-4"},at={class:"w-1/2"},ot={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6 p-5"},lt={class:"text-lg font-semibold text-gray-700 text-center mb-4"},st={class:"w-full border-collapse border border-gray-300"},rt=m("thead",null,[m("tr",{class:"bg-gray-100"},[m("th",{class:"border border-gray-300 px-2 py-2"},"#"),m("th",{class:"border border-gray-300 px-2 py-2"},"Time"),m("th",{class:"border border-gray-300 px-2 py-2"},"Valor")])],-1),ct={class:"border border-gray-300 px-2 py-2 text-center"},it={class:"border border-gray-300 px-2 py-2"},dt={class:"border border-gray-300 px-2 py-2 text-center"},ut={id:"graficos"},mt=m("div",{id:"controlesUnderOver",style:{"margin-bottom":"20px"}},null,-1),pt=m("canvas",{id:"graficoUnderOver"},null,-1),ht={class:"table"},ft={id:"tabelao25"},gt=m("div",{id:"controlesAmbas",style:{"margin-bottom":"20px"}},null,-1),Ct=m("canvas",{id:"graficoAmbas"},null,-1),bt={class:"table"},xt={id:"tabelaambas"},kt={__name:"home",setup(Et){const T=E(""),X=E(!1),O=E(null),R=E(!0),z=E(!0),Y=E([]),me=E([{label:"Copa",value:"copa"},{label:"Euro",value:"euro"},{label:"Super",value:"super"},{label:"Premier",value:"premier"}]);function Z(o){const a=o.match(/(\d+)-(\d+)/);return a?parseInt(a[1])+parseInt(a[2]):0}const pe=o=>{const a=o.map(n=>n.slice(1).map(e=>({team:e.split(" x ")[0],goals:Z(e)}))),t={};return a.forEach(n=>{n.forEach(e=>{t[e.team]||(t[e.team]=[]),t[e.team].push(e.goals)})}),Object.entries(t).map(([n,e])=>{const r=e.reduce((c,s)=>c+s,0);return{team:n,value:(r/e.length).toFixed(2)}}).sort((n,e)=>e.value-n.value).slice(0,5)},he=o=>o.map(l=>l.slice(1).map(n=>({team:n.split(" x ")[0]}))).flat().map(l=>{const n=Math.floor(Math.random()*6),e=(n+Math.random()*5).toFixed(2);return{team:l.team,value:`${n} / ${e}`}}).sort((l,n)=>n.value.split(" / ")[1]-l.value.split(" / ")[1]).slice(0,5),fe=o=>{const a=o.map(n=>n.slice(1).map(e=>({team:e.split(" x ")[0],goals:Z(e)}))),t={};return a.forEach(n=>{n.forEach(e=>{t[e.team]||(t[e.team]=0),t[e.team]+=e.goals>=5?1:0})}),Object.entries(t).map(([n,e])=>({team:n,value:e})).sort((n,e)=>e.value-n.value).slice(0,5)},ge=()=>{const o=document.getElementById("graficos");if(X.value=!0,!o){console.error("Elemento #graficos não encontrado.");return}o.style.display="block",Ce()};let S=null,N=null;const I=["under25","over25"],U=["ambasNao","ambas"],v={under25:"#f53246",over25:"#6bf58b",ambas:"#6bf58b",ambasNao:"#f53246"};function Ce(){T.value=T.value.replace(/\r?\n|\r/g," ").replace(/\s{2,}/g," ");const o=T.value.trim();if(!o)return;const a=O.value,t=be(a),l=xe(o);Y.value=[{title:"Chama Gol",data:pe(l)},{title:"Máxima de Mercado",data:he(l)},{title:"Âncora de Mercado",data:fe(l)}];const n={};[...I,...U].forEach(c=>{n[c]=Ee(l,c)}),ve(n,["over25","ambas"]),ke(t,l,n);const e=Ie(l,n),r=Ue(t,l);Fe(e,r)}function be(o){switch(o){case"copa":case"super":return Array.from({length:20},(a,t)=>1+t*3);case"euro":return Array.from({length:20},(a,t)=>2+t*3);case"premier":return Array.from({length:20},(a,t)=>t*3);default:return[]}}function xe(o){return o.split(`
`).map((a,t)=>{const l=a.trim().split(/\t+/),n=l.shift();(!n||isNaN(n))&&console.warn(`Hora inválida na linha ${t}: ${n}`);const e=l.map(r=>r.replace("+","").trim());return[n,...e]})}function Ee(o,a){return o.map(t=>{const l=t[0],n=t.slice(1).map(e=>{if(!e)return!1;const r=e.match(/(\d+)-(\d+)$/);if(!r)return!1;const c=parseInt(r[1],10),s=parseInt(r[2],10);switch(a){case"under25":return c+s<2.5;case"over25":return c+s>=2.5;case"ambas":return c>0&&s>0;case"ambasNao":return!(c>0&&s>0);default:return!1}});return[l,...n]})}function ve(o,a){const t={};return a.forEach(l=>{let n=0;const e=[];for(let r=o[l].length-2;r>=0;r--){const c=o[l][r].slice(1),s=o[l][r+1].slice(1);c.forEach((i,d)=>{const f=s[d];i===f?n+=0:n+=i?1:-1,e[r]||(e[r]=[]),e[r][d]=n})}t[l]=e}),t}function ye(o,a,t){const l=[],n=o.length-1;for(let e=1;e<=20;e++){let r=0;for(let s=1;s<o.length;s++)t[a]&&t[a][s]&&t[a][s][e]&&r++;const c=n>0?(r/n*100).toFixed(0):0;l.push(c)}return l}function _e(o){const a=[];let t=0;return o.forEach((l,n)=>{t+=parseInt(l,10),(n+1)%5===0&&(a.push(t/5),t=0)}),a}function Te(o){const t=document.getElementById(o).querySelectorAll("tr");let l=0,n=0;t.forEach((c,s)=>{if(s>1){const i=c.querySelector("td:nth-last-child(6)");if(i){const d=parseInt(i.innerText.replace("%","").trim(),10);isNaN(d)||(l+=d,n++)}}});const e=n>0?`${Math.ceil((l/n).toFixed(2))}%`:0,r=document.getElementById(`${o}mediaColunaPorcentagens`);r.innerText=e}function Le(o){const a=document.getElementById(o),t=Array.from(a.getElementsByClassName("subidasCell"));let l=0,n=0;t.forEach((c,s)=>{if(s>0){const i=c.innerText;if(i){const d=parseInt(i.trim(),10);isNaN(d)||(l+=d,n++)}}});const e=n>0?`${Math.ceil((l/(n-1)).toFixed(2))}`:0,r=document.getElementById(`${o}mediaColunaSubidas`);r.innerText=e}function Be(o){const a=document.getElementById(o),t=Array.from(a.getElementsByClassName("lateralizacoesOverCell"));let l=0,n=0;t.forEach((c,s)=>{if(s>0){const i=c.innerText;if(i){const d=parseInt(i.trim(),10);isNaN(d)||(l+=d,n++)}}});const e=n>0?`${Math.ceil((l/(n-1)).toFixed(2))}`:0,r=document.getElementById(`${o}mediaColunaLateralizacoesOver`);r.innerText=e}function $e(o){const a=document.getElementById(o),t=Array.from(a.getElementsByClassName("descidasCell"));let l=0,n=0;t.forEach((c,s)=>{if(s>0){const i=c.innerText;if(i){const d=parseInt(i.trim(),10);isNaN(d)||(l+=d,n++)}}});const e=n>0?`${Math.ceil((l/(n-1)).toFixed(2))}`:0,r=document.getElementById(`${o}mediaColunaDescidas`);r.innerText=e}function Ae(o){const a=document.getElementById(o),t=Array.from(a.getElementsByClassName("lateralizacoesUnderCell"));let l=0,n=0;t.forEach((c,s)=>{if(s>0){const i=c.innerText;if(i){const d=parseInt(i.trim(),10);isNaN(d)||(l+=d,n++)}}});const e=n>0?`${Math.ceil((l/(n-1)).toFixed(2))}`:0,r=document.getElementById(`${o}mediaColunaLateralizacoesUnder`);r.innerText=e}function Se(o){const a=document.getElementById(o),t=Array.from(a.getElementsByTagName("tr"));let l=0,n=0;for(let c=1;c<t.length-1;c++){const s=t[c].querySelector(".golsCell");if(s){const i=parseInt(s.innerText.trim(),10);isNaN(i)||(l+=i,n++)}}const e=n>0?`${Math.ceil(l/n)}`:0,r=document.getElementById(`${o}mediaColunaGols`);r.innerText=e}function Ne(o,a){const t=document.getElementById(o);if(!a||a.length===0){console.warn("O mosaico está vazio.");return}const l=a[0].length-1,n=Array(l).fill(0);a.forEach((s,i)=>{i>0&&s.slice(1).forEach((d,f)=>{const g=d.match(/(\d+)-(\d+)/);if(g){const u=parseInt(g[1]),b=parseInt(g[2]);n[f]+=u+b}})});const e=document.createElement("tr"),r=document.createElement("td");r.innerText="⚽",e.appendChild(r),n.forEach(s=>{const i=document.createElement("td");i.innerText=s||0,i.classList.add("somaGolsCell"),e.appendChild(i)});const c=6;for(let s=0;s<c;s++){const i=document.createElement("td");e.appendChild(i)}t.insertBefore(e,t.querySelector("tr:nth-child(3)"))}function Me(o,a){const t=document.getElementById(o),l=document.createElement("tr"),n=document.createElement("td");n.innerHTML="📈",l.appendChild(n);const e=t.getElementsByTagName("tr"),r=Array.from(e[1].querySelectorAll("td")).slice(1),c=a[0].slice(1);let s=0;r.forEach((i,d)=>{const f=parseFloat(i.innerText.replace("%","").trim()),g=c[d],u=document.createElement("td");if(g){const b=g.split(" "),k=b[b.length-1],[L,B]=k.split("-").map(Number);if(!isNaN(L)&&!isNaN(B)){const x=L+B>2.5;x&&f>42?(u.innerText=s,u.classList.add("green")):!x&&f<=42?(u.innerText=s,u.classList.add("red")):x&&f<=42?(s++,u.innerText=s,u.classList.add("green")):!x&&f>42&&(s--,u.innerText=s,u.classList.add("red"))}else u.innerText=s}else u.innerText="";l.appendChild(u)}),t.insertBefore(l,t.querySelector("tr:nth-child(3)"))}function ke(o,a,t,l){["tabelao25","tabelaambas"].forEach((e,r)=>{const c=r===0?"over25":"ambas",s=document.getElementById(e);s.innerHTML="";const i=ye(a,c,t),d=_e(i),f=document.createElement("tr"),g=document.createElement("td");g.classList.add("percentCell"),g.innerText="%",f.appendChild(g);for(let p=0;p<d.length;p++){const h=document.createElement("td");h.setAttribute("colspan","5"),h.innerText=`${d[p]}%`,h.classList.add("percentCell"),h.classList.add(d[p]>42?"text-green":"text-red"),f.appendChild(h)}s.appendChild(f);const u=document.createElement("tr"),b=document.createElement("td");b.classList.add("percentCell"),b.innerText="%",u.appendChild(b);for(let p=0;p<i.length;p++){const h=document.createElement("td");h.innerText=`${i[p]}%`,h.classList.add("percentCell"),h.classList.add(i[p]>42?"text-green":"text-red"),u.appendChild(h)}s.appendChild(u);const k=document.createElement("td");k.setAttribute("id",`${e}mediaColunaPorcentagens`),u.appendChild(k),s.appendChild(u);const L=document.createElement("td");L.setAttribute("id",`${e}mediaColunaSubidas`),u.appendChild(L),s.appendChild(u);const B=document.createElement("td");B.setAttribute("id",`${e}mediaColunaLateralizacoesOver`),u.appendChild(B),s.appendChild(u);const V=document.createElement("td");V.setAttribute("id",`${e}mediaColunaDescidas`),u.appendChild(V),s.appendChild(u);const x=document.createElement("td");x.setAttribute("id",`${e}mediaColunaLateralizacoesUnder`),u.appendChild(x),s.appendChild(u);const te=document.createElement("td");te.setAttribute("id",`${e}mediaColunaGols`),u.appendChild(te),s.appendChild(u);const w=document.createElement("tr"),ne=document.createElement("th");ne.innerText="Hora",w.appendChild(ne),o.forEach(p=>{const h=document.createElement("th");h.innerText=`${p<10?"0"+p:p}`,w.appendChild(h)}),["％","⬆️","↔️","⬇️","⇆","⚽"].forEach(p=>{const h=document.createElement("th");h.innerText=p,w.appendChild(h)}),s.appendChild(w),a.forEach((p,h)=>{const C=document.createElement("tr"),F=document.createElement("td");F.innerText=p[0]<10?`0${p[0]}`:p[0],F.classList.add("firstCollumn"),C.appendChild(F),p.slice(1).forEach(($,J)=>{const K=document.createElement("td");K.innerText=$||"";const Q=$.match(/(\d+)-(\d+)/);if(Q){const oe=parseInt(Q[1]),le=parseInt(Q[2]);let P="";c==="over25"?P=oe+le>2?"green":"red":c==="ambas"&&(P=oe>0&&le>0?"green":"red"),P&&K.classList.add(P)}C.appendChild(K)});const He=o.length-p.slice(1).length;for(let $=0;$<He;$++){const J=document.createElement("td");J.innerText="",C.appendChild(J)}const ae=document.createElement("td");ae.innerText=we(h,t[c]),C.appendChild(ae);const q=document.createElement("td");q.classList.add("subidasCell"),q.innerText=Pe(h,t,c),C.appendChild(q);const D=document.createElement("td");D.classList.add("lateralizacoesOverCell"),D.innerText=Oe(h,t,c),C.appendChild(D);const H=document.createElement("td");H.classList.add("descidasCell"),H.innerText=Ge(h,t,c),C.appendChild(H);const j=document.createElement("td");j.classList.add("lateralizacoesUnderCell"),j.innerText=Re(h,t,c),C.appendChild(j);const W=document.createElement("td");W.classList.add("golsCell"),W.innerText=ze(p),C.appendChild(W),s.appendChild(C)}),Te(e),Le(e),Be(e),$e(e),Ae(e),Se(e),Ne(e,a),Me(e,a)}),Ve()}function we(o,a){const t=a[o].slice(1).length,l=a[o].slice(1).filter(Boolean).length;return`${Math.round(l/t*100)}%`}function Pe(o,a,t){return M(o,a,t,!0,!1)}function Ge(o,a,t){return M(o,a,t,!1,!0)}function Oe(o,a,t){return M(o,a,t,!0,!0)}function Re(o,a,t){return M(o,a,t,!1,!1)}function ze(o){return o.slice(1).reduce((a,t)=>{const l=t.match(/(\d+)-(\d+)/);if(l){const n=parseInt(l[1]),e=parseInt(l[2]);return a+n+e}else return a},0)}function M(o,a,t,l,n){let e=0;const r=a[t][o],c=a[t][o+1];return c&&r.slice(1).forEach((s,i)=>{const d=c[i+1];s===l&&d===n&&e++}),e}function Ie(o,a){return[...I,...U].map(t=>{let l=0;const n=[];for(let e=o.length-2;e>=0;e--){const r=a[t][e].slice(1),c=a[t][e+1].slice(1);r.forEach((s,i)=>{const d=c[i];s===d?l+=0:l+=s?1:-1,n.push(l)})}return{mercado:t,oscilacoes:n}})}function Ue(o,a){const t=[];for(let l=a.length-2;l>=0;l--){const n=a[l].slice(1),e=a[l][0];for(let r=0;r<n.length;r++)t.push(`${e<10?"0"+e:e}:${o[r]<10?"0"+o[r]:o[r]}`)}return t}function Ve(){document.querySelectorAll("td span.pontosGraficos").forEach(a=>{a.addEventListener("click",function(){const t=this.innerText;this.parentElement.classList.contains("highlight")?document.querySelectorAll("td span.pontosGraficos").forEach(e=>{e.innerText===t&&e.parentElement.classList.remove("highlight")}):(document.querySelectorAll(".highlight").forEach(e=>{e.classList.remove("highlight")}),document.querySelectorAll("td span.pontosGraficos").forEach(e=>{e.innerText===t&&e.parentElement.classList.add("highlight")}))})})}function Fe(o,a){ee(o,I,"graficoUnderOver","controlesUnderOver",a),ee(o,U,"graficoAmbas","controlesAmbas",a)}function ee(o,a,t,l,n){const e=document.getElementById(t).getContext("2d");t==="graficoUnderOver"&&S?(S.destroy(),S=null):t==="graficoAmbas"&&N&&(N.destroy(),N=null);const r=o.filter(d=>a.includes(d.mercado)).map(d=>({label:d.mercado.toUpperCase(),data:d.oscilacoes,borderColor:v[d.mercado],backgroundColor:v[d.mercado],fill:!1,tension:.4,pointStyle:"circle",pointRadius:3.5,pointHoverRadius:4,pointBackgroundColor:"transparent",pointBorderColor:v[d.mercado]})),c={labels:n,datasets:r},s={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(d){return` ${d.dataset.label}: ${d.raw}`}}}},scales:{x:{title:{display:!0,text:"HorÃ¡rio"},ticks:{maxRotation:0,autoSkip:!0,stepSize:5}},y:{title:{display:!0,text:"Valores Acumulados"}}}},i=new Qe(e,{type:"line",data:c,options:s});t==="graficoUnderOver"?S=i:t==="graficoAmbas"&&(N=i),qe(o,a,i,l)}function qe(o,a,t,l){const n=document.getElementById(l);n.innerHTML="",o.forEach(e=>{const r=e.mercado,c=document.createElement("input");c.type="checkbox",c.id=`mercado-${r}-${l}`,c.checked=a.includes(r);const s=document.createElement("label");s.htmlFor=`mercado-${r}-${l}`,s.textContent=r.toUpperCase(),c.addEventListener("change",()=>{De(o,t,l)});const i=document.createElement("div");i.style.marginRight="10px",i.style.display="inline-block",i.appendChild(c),i.appendChild(s),n.appendChild(i)})}function De(o,a,t){const l=Array.from(document.querySelectorAll(`#${t} input:checked`)).map(e=>e.id.replace("mercado-","").replace(`-${t}`,"")),n=o.filter(e=>l.includes(e.mercado)).map(e=>({label:e.mercado.toUpperCase(),data:e.oscilacoes,borderColor:v[e.mercado],backgroundColor:v[e.mercado],fill:!1,tension:.4,pointStyle:"circle",pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"transparent",pointBorderColor:v[e.mercado]}));a.data.datasets=n,a.update()}return(o,a)=>{const t=je,l=We,n=Ke;return _(),y("div",Xe,[m("div",Ye,[Ze,m("div",et,[tt,A(t,{modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value=e),placeholder:"Insira os dados",class:"w-full",rows:"4"},null,8,["modelValue"])]),m("div",nt,[m("div",at,[A(l,{modelValue:O.value,"onUpdate:modelValue":a[1]||(a[1]=e=>O.value=e),options:me.value,"option-label":"label","option-value":"value",placeholder:"Selecione um campeonato",class:"w-full"},null,8,["modelValue","options"])]),A(n,{label:"Analisar",severity:"success",class:"w-full",onClick:ge})])]),X.value?(_(),y("div",ot,[(_(!0),y(se,null,re(Y.value,(e,r)=>(_(),y("div",{key:r,class:"bg-white shadow-lg rounded-xl p-2"},[m("h2",lt,G(e.title),1),m("table",st,[rt,m("tbody",null,[(_(!0),y(se,null,re(e.data,(c,s)=>(_(),y("tr",{key:c.team,class:"odd:bg-gray-50 even:bg-white"},[m("td",ct,G(s+1),1),m("td",it,G(c.team),1),m("td",dt,G(c.value),1)]))),128))])])]))),128))])):Je("",!0),m("div",ut,[m("div",null,[mt,pt,m("div",ht,[A(n,{type:"button",class:"btnTables",onClick:a[2]||(a[2]=e=>R.value=!R.value)},{default:ce(()=>[ue(" Mostrar/Esconder Tabela ")]),_:1}),ie(m("table",ft,null,512),[[de,R.value]])])]),m("div",null,[gt,Ct,m("div",bt,[A(n,{type:"button",class:"btnTables",onClick:a[3]||(a[3]=e=>z.value=!z.value)},{default:ce(()=>[ue(" Mostrar/Esconder Tabela ")]),_:1}),ie(m("table",xt,null,512),[[de,z.value]])])])])])}}};export{kt as default};
