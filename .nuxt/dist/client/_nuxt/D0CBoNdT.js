import{_ as D}from"./t43sw3--.js";import E from"./D1OGBwm2.js";import{r as c,y as P,z,n as A,c as G,h as l,m as x,u as t,a as s,b as e,x as j,i as I,j as U,t as H,w as d,F as J,s as K,g as O,o as Q,d as b}from"./Bo0c-sWM.js";import{s as W,u as X,e as w,b as S,_ as R,p as Y,f as Z}from"./BXEL9EmM.js";import ee from"./-HAIyiFH.js";import{a as te,u as oe,S as L,c as se}from"./BudnUJeG.js";import"./BLFW1-Qr.js";import"./Cfiee2jg.js";import"./CY6ZV7BS.js";import"./BeD20kmL.js";import"./DViPKDuM.js";const ae={class:"bg-white p-8 drop-shadow-md rounded-lg w-full lg:w-1/3 sm:mx-auto"},ne=e("div",{class:"text-center mb-7"},[e("img",{src:R,alt:"Logotipo",class:"mt-4 mb-8 h-10 mx-auto"}),e("div",{class:"text-900 text-xl font-medium my-2"}," Redefinição de Senha "),e("div",{class:"text-gray-600"}," Geramos uma senha segura para você, mas você pode alterá-la clicando e editando o campo abaixo! ")],-1),re={class:"mb-7"},le={class:"p-inputgroup flex-1 border-solid border border-gray-300 rounded-lg"},ie={class:"p-error text-sm"},ue={class:"text-center mt-4"},ce={class:"bg-white p-8 drop-shadow-md rounded-lg w-full lg:w-1/3 sm:mx-auto"},de={class:"text-center mb-7"},me=e("img",{src:R,alt:"Logotipo",class:"mt-4 mb-8 h-10 mx-auto"},null,-1),pe=e("div",{class:"text-900 text-xl font-medium my-2"}," Redefinição de Senha ",-1),_e={class:"text-center mt-4"},ve={class:"text-center mt-4"},Re={__name:"redefinir-senha",setup(fe){W(Y);const i=c(!0),m=c(!1),p=c(!1),_=c(!1),v=te(),f=oe(),h=P(),{handleSubmit:T}=X();z(async()=>{const n=await f.validarTokenRedefinicao({token:h.query.token,user:h.query.user});n&&(q.value=n.email,F.value=h.query.token,m.value=!0),i.value=!1});const{value:q}=w("email",S()),{value:a,errorMessage:y}=w("password",S().required()),{value:F}=w("token",S()),k=T(n=>{if(!p.value){v.show("Antes de continuar","Copie a senha gerada e guarde em um local seguro.",L.Error);return}_.value=!0,f.redefinirSenha(n).then(o=>{v.show(se.Success,o.message,L.Success),setTimeout(()=>{A("/login")},1e3)}).finally(()=>{_.value=!1})}),B=()=>{navigator.clipboard.writeText(a.value),v.show("Senha copiada","Salve em um local seguro"),p.value=!0},C=()=>{a.value=f.gerarSenha(),p.value=!1};return C(),(n,o)=>{const $=D,M=E,u=K,g=Z,N=ee,V=O("tooltip");return Q(),G(J,null,[l(s($,null,null,512),[[x,t(i)]]),l(e("div",ae,[ne,e("div",null,[e("form",{onSubmit:o[3]||(o[3]=j((...r)=>t(k)&&t(k)(...r),["prevent"]))},[e("div",re,[e("div",le,[s(M,{modelValue:t(a),"onUpdate:modelValue":o[0]||(o[0]=r=>I(a)?a.value=r:null),class:U([{"p-invalid":t(y)},"border-none"])},null,8,["modelValue","class"]),l(s(u,{icon:"pi pi-sync",text:"",outlined:"",onClick:o[1]||(o[1]=r=>C())},null,512),[[V,"Gerar senha",void 0,{top:!0}]]),l(s(u,{icon:"pi pi-copy",severity:"secondary",onClick:o[2]||(o[2]=r=>B())},null,512),[[V,"Copiar senha",void 0,{top:!0}]])]),e("span",ie,H(t(y)),1)]),s(u,{type:"submit",label:"Continuar",class:"w-full",loading:t(_)},null,8,["loading"])],32),e("div",ue,[s(g,{to:"/login",class:"font-medium no-underline ml-2 text-blue-500 text-right cursor-pointer"},{default:d(()=>[b(" Voltar para Login ")]),_:1})])])],512),[[x,!t(i)&&t(m)]]),l(e("div",ce,[e("div",de,[me,pe,s(N,{severity:"error",closable:!1,class:"text-left"},{default:d(()=>[b(" Lamentamos, este link de redefinição de senha é inválido. ")]),_:1})]),e("div",null,[e("div",_e,[s(g,{to:"/recuperar-senha"},{default:d(()=>[s(u,{label:"Solicitar nova recuperação de Senha",class:"w-full"})]),_:1})]),e("div",ve,[s(g,{to:"/login",class:"font-medium no-underline ml-2 text-blue-500 text-right cursor-pointer"},{default:d(()=>[b(" Voltar para Login ")]),_:1})])])],512),[[x,!t(i)&&!t(m)]])],64)}}};export{Re as default};
